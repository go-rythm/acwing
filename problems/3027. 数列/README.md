## [3027. 数列](https://www.acwing.com/problem/content/3030/)

### 题目

九条可怜手上有一个长度为 *n* 的整数数列 *r_i*，她现在想要构造一个长度为 *n* 的，满足如下条件的整数数列 *A*：

- *1 ≤ A_i ≤ r_i*。
- 对于任意 *3 ≤ i ≤ n*，令 *R* 为 *A_1* 至 *A_{i−2}* 中大于等于 *A_{i−1}* 的最小值，*L* 为 *A_1* 至 *A_{i−2}* 中小于等于 *A_{i−1}* 的最大值。*A_i* 必须满足 *L ≤ A_i ≤ R*。如果不存在大于等于 *A_{i−1}* 的，那么 *R = +∞*；如果不存在小于等于 *A_{i−1}* 的，那么 *L = −∞*。

现在可怜想要知道共有多少不同的数列满足这个条件。

两个数列 *A* 和 *B* 是不同的当且仅当至少存在一个位置 *i* 满足 *A_i ≠ B_i*。

### 输入格式

第一行输入一个整数 *n*。

第二行输入 *n* 个整数 *r_i*。

### 输出格式

输出一个整数表示方案数，答案可能很大，对 *998244353* 取模后输出。

### 数据范围

 ![QQ截图20201217155041.png](https://cdn.acwing.com/media/article/image/2020/12/17/19_95f672b040-QQ截图20201217155041.png)

对于 *100%* 的数据，保证 *n ≥ 1, r_i ≥ 1*。

### 输入样例：

```
3
2 2 2
```

### 输出样例：

```
6
```

### 样例解释

满足条件的序列有 *[1, 1, 1], [1, 2, 1], [1, 2, 2], [2, 1, 1], [2, 1, 2], [2, 2, 2]*。
