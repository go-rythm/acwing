## [1685. 流量测量](https://www.acwing.com/problem/content/1687/)

### 题目

Farmer John 的农场边上的高速公路最近出现了引人注目的流量上升，或者至少 Farmer John 看起来是这样的。

为了证实这件事，他打算用一组传感器测量公路上的车流量，每个传感器被用来测量一小段路面上的车流量的数值。

不幸的是，某一天经过牛棚的时候，Farmer John 被绊倒了，装有传感器的盒子掉进了一个巨大的奶缸，之后它们就不能正常工作了。

比起之前可以产生一个精确的车流量读数，现在每个传感器只能输出一个可能结果的范围。

例如，一个传感器可能会给出范围 *[7,13]*，表示在这段路面上的车流量不小于 *7*，并且不大于 *13*。

高速公路经过农场的这一段长 *N* 英里，车辆仅从一个方向通过公路，从第 *1* 英里驶向第 *N* 英里。

Farmer John想要安装 *N* 个传感器——每一个监测高速公路上 *1* 英里长的路段。

在其中某些路段上，有能够使得车辆进入高速公路的上匝道；在所有这样的路段上，Farmer John 会将传感器装在上匝道上，测量流入的（近似）车流量。

在某些路段上有能够使得车辆离开高速公路的下匝道；在所有这样的路段上，Farmer John 会将传感器装在下匝道上。

每一个路段包含至多一个匝道。

如果在公路的一个路段上没有上匝道或下匝道，Farmer John 就将传感器装在高速公路的主路上。

给定 Farmer John 的 *N* 个传感器的读数，请求出在高速公路第 *1* 英里之前和第 *N* 英里之后车流量的最为准确的可能范围。

这些范围应当与所有 *N* 个传感器的读数相一致。

### 输入格式

输入的第一行包含 *N*。

余下 *N* 行每行按从第 *1* 英里至第 *N* 英里的顺序描述一段 *1* 英里长的路段。

每行包含一个字符串，为”on”（如果这段路上有一个上匝道），”off”（如果这段路上有一个下匝道），或者是”none”（如果这段路上没有匝道），然后是两个范围为 *0…1000* 的整数，表示这段路上的传感器的读数所给出的下界、上界。

如果这段路上包含匝道，传感器读数来自于匝道，否则来自于主路。

至少一个高速公路路段的描述会是”none”。

### 输出格式

输出的第一行包含两个整数，为第 *1* 英里之前的车流量的最准确的可能范围。

第二行包含两个整数，为第 *N* 英里之后的车流量的最准确的可能范围。

输入保证存在符合要求的解。

### 数据范围

*1 ≤ N ≤ 100*

### 输入样例：

```
4
on 1 1
none 10 14
none 11 15
off 2 3
```

### 输出样例：

```
10 13
8 12
```

### 样例解释

在这个例子中，路段 *2* 和路段 *3* 的读数组合在一起告诉我们通过这两个路段的车流量为范围 *[11,14]* 之间的某个值，因为只有这个范围与两个读数 *[10,14]* 和 *[11,15]* 均一致。

在第 *1* 英里，恰有 *1* 单位的车辆通过上匝道进入，所以在第 *1* 英里之前，车流量一定在范围 *[10,13]* 之内。

在第 *4* 英里，*2* 单位到 *3* 单位之间的车辆通过下匝道离开，所以这段路之后可能的车流量范围为 *[8,12]*。
