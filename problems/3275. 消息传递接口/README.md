## [3275. 消息传递接口](https://www.acwing.com/problem/content/3278/)

### 题目

消息传递接口（MPI）是一个并行计算的应用程序接口，常用于超级计算机、计算机集群等环境下的程序设计。

老师给了 *T* 份 MPI 的样例代码，每份代码都实现了 *n* 个进程通信。

这些进程标号从 *0* 到 *n-1*，每个进程会顺序执行自己的收发指令，如: `S x`， `R x`。

`S x` 表示向 *x* 号进程发送数据， `R x` 表示从 *x* 号进程接收数据。

每一对收发命令必须匹配执行才能生效，否则会“死锁”。

举个例子，*x* 号进程先执行发送命令 `S y`，*y* 号进程必须执行接送命令 `R x`，这一对命令才执行成功。

否则 *x* 号进程会一直等待 *y* 号进程执行对应的接收命令。

反之，若 *y* 号进程先执行接收命令 `R x`，则会一直等待 *x* 号进程执行发送命令 `S y`，若 *x* 号进程一直未执行发送命令 `S y`，则 *y* 号进程会一直等待 *x* 号进程执行对应的发送命令。

上述这样发送接收命令不匹配的情况都会造成整个程序出现“死锁”。

另外，*x* 号进程不会执行 `S x` 或 `R x`，即不会从自己的进程收发消息。

现在老师请你判断每份样例代码是否会出现“死锁”的情况。

每个进程的指令最少有 *1* 条，最多有 *8* 条，这些指令按顺序执行，即第一条执行完毕，才能执行第二条，依次到最后一条。

### 输入格式

输入第一行两个正整数 *T,n*，表示有 *T* 份样例代码，实现了 *n* 个进程通信。

接下来有 *T × n* 行，每行有若干个(*1-8* 个）字符串，相邻之间有一个空格隔开，表示相应进程的收发指令。不存在非法指令。对于第 *2+i,0≤i<(T × n- 1)* 行，表示第 *i÷n* (商）份代码的 *i bmod n* (余数）号进程的收发指令。

(比如， `S1` 表示向 *1* 号进程发送消息， `R1` 表示从 *1* 号进程接收消息。细节请参考样例。)

### 输出格式

输出共 *T* 行，每行一个数字，表示对应样例代码是否出现“死锁”的情况。*1* 表示死锁，*0* 表示不死锁。

### 数据范围

 ![QQ截图20210222161405.png](https://cdn.acwing.com/media/article/image/2021/02/22/19_f2ddd6ad74-QQ截图20210222161405.png)

### 输入样例1：

```
3 2
R1 S1
S0 R0
R1 S1
R0 S0
R1 R1 R1 R1 S1 S1 S1 S1
S0 S0 S0 S0 R0 R0 R0 R0
```

### 输出样例1：

```
0
1
0
```

### 样例1解释

第 *1* 份代码中，(1) *0* 号进程执行的 `R1` 和 *1* 号进程执行的 `S0` 成功执行;(2) *0* 号进程执行的 `S1` 和 *1* 号进程执行的 `R0` 成功执行，所以未发生“死锁”，程序顺利运行。

第 *1* 份代码中，(1) *0* 号进程执行的 `R1` 和 *1* 号进程执行的 `R0` 一直在等待发送命令，进入“死锁”状态。

### 输入样例2：

```
2 3
R1 S1
R2 S0 R0 S2
S1 R1
R1
R2 S0 R0
S1 R1
```

### 输出样例2：

```
0
1
```

### 样例2解释

第 *1* 份代码中，(1) *2* 号进程执行的 `S1` 和 *1* 号进程执行的 `R2` 成功执行;(2) *0* 号进程执行的 `R1` 和 *1* 号进程执行的 `S0` 成功执行;(3) *0* 号进程执行的 `S1` 和 *1* 号进程执行的 `R0` 成功执行;(4) *1* 号进程执行的 `S2` 和 *2* 号进程执行的 `R1` 成功执行;所以未发生“死锁”，程序顺利运行。

第 *1* 份代码中，(1) *2* 号进程执行的 `S1` 和 *1* 号进程执行的 `R2` 成功执行;(2) *0* 号进程执行的 `R1` 和 *1* 号进程执行的 `S0` 成功执行;(3) *1* 号进程执行的 `R0` 和 *2* 号进程执行的 `R1` 一直在等待发送命令;进入“死锁”状态。
