## [556. 专业村](https://www.acwing.com/problem/content/558/)

### 题目

Kickstartia 的乡镇由 *V* 个村子组成，由 *E* 条双向道路连接，任意两条道路的长度互不相等。

每条道路恰好连接两个村庄，不存在两条道路连接相同的两个村庄的情况。

新国王为了显示他的贤明，制定了一个生产计划，即每个村庄都将专门生产一种食物：水果或蔬菜。

如果一个村庄生产水果，那么他们需要找到通往某个生产蔬菜的村庄的最短路径（可能使用多条道路）。

同样，如果一个村庄生产蔬菜，那么他们需要找到通往某个生产水果的村庄的最短路径。

通过这种方式，去获得本村无法生产的食物。

国王希望每个村庄获得它无法生产的食物而需要奔走的距离的平均值能够降到最低。

可能存在很多生产分配计划能够将这个距离的平均值降到最低，国王希望你告诉他这样的计划有多少个。

两个计划相比较，如果存在至少一个村庄在一个计划中生产水果，而在另一个计划中生产蔬菜，则我们认为两个计划是不同的。

国王保证至少存在一个能够使得每个村庄同时获得水果和蔬菜的计划。

### 输入格式

第一行包含整数 *T*，表示共有 *T* 组测试数据。

每组数据第一行包含两个整数 *V* 和 *E*，分别表示村庄数量和道路数量。

接下来 *E* 行，第 *i* 行包含三个整数 *A_i,B_i,L_i*，表示第 *i* 条道路将村庄 *A_i* 和村庄 *B_i* 连接在一起，道路长度为 *L_i*。

村庄编号为 *1 ~ V*。

### 输出格式

每组数据输出一个结果，每个结果占一行。

结果表示为 `Case #x: y`，其中 *x* 为组别编号（从 *1* 开始），*y* 为国王想要的答案，如上所述。

### 数据范围

*1 ≤ T ≤ 100*,

*1 ≤ E ≤ min(1000,V*(V-1)/2)*,

*0 ≤ L_i ≤ 10^5*,

*L_i ≠ L_j,i ≠ j*,

*1 ≤ A_i < B_i ≤ V*,

*(A_i,B_i) ≠ (A_j,B_j),i ≠ j*,

*2 ≤ V ≤ 50*

### 输入样例：

```
2
3 3
1 2 1
1 3 6
2 3 4
6 5
1 2 6
3 4 0
5 6 7
3 5 1
4 6 2
```

### 输出样例：

```
Case #1: 2
Case #2: 16
```

### 样例解释

在样例＃1中，一个可行的计划是让村庄 *1* 和 *3* 生产水果并使村庄 *2* 生产蔬菜。

*1* 号和 *2* 号村可以相互连通，以获得他们缺乏的食物，他们需要奔走的距离同为 *1*，*3* 号村需要前往 *2* 号村获取蔬菜，奔走距离为 *4*。

总的来说，平均值距离是 *(1 + 1 + 4)/3 = 2*，这是可以达到的平均距离最小值。

此外，还有另一个最佳计划（村庄 *1* 和 *3* 生产蔬菜，村庄 *2* 生产水果），因此最终答案是 *2*。

在样例＃2中，有 *16* 个可能的计划。

其中一种方法是让村庄 *1,3* 和 *5* 生产水果，而村庄 *2,4* 和 *6* 生产蔬菜。

*1* 号和 *2* 号村相互提供所需食物，*3* 号和 *5* 号村可以前往 *4* 号村获取蔬菜，*4* 号和 *6* 号村可以前往3号村取得水果。

平均距离是 *(6 + 6 + 0 + 1 + 0 + 2)/ 6 = 2.5*，这是可以达到的平均距离最小值。

注意：即使两个村庄通过长度为 *0* 的道路相连，它们也被认为是不同的村庄。
