## [1823. 关闭农场](https://www.acwing.com/problem/content/1825/)

### 题目

农夫约翰和他的奶牛正计划离开城镇休假，因此约翰希望暂时关闭农场以节省资金。

农场中有 *N* 个牛棚，被 *M* 条 **双向** 道路连接，每条道路将其中两个牛棚直接相连。

为了关闭农场，约翰计划一次关闭一个牛棚。

当一个牛棚关闭时，与其相邻的所有道路也会关闭，并且无法再使用。

约翰感兴趣的是在每一个时间点（最初和每次关闭一个牛棚之后）探究他的农场是否“完全连通”。

完全连通指可以沿着适当的一系列路径从任何开放的牛棚到任何其他开放的牛棚。

由于约翰的农场最初处于某种程度的年久失修状态，它甚至可能一开始就没有完全连通。

### 输入格式

第一行包含两个整数 *N,M*。

接下来 *M* 行，每行包含两个整数 *a,b*，表示牛棚 *a* 和牛棚 *b* 之间存在一条双向道路。

牛棚编号为 *1 ~ N*。

接下来 *N* 行，给出了一个 *1 ~ N* 的排列，表示关闭牛棚的顺序。

### 输出格式

共 *N* 行，每行包含 “YES” 或 “NO”。

第 *1* 行表示最初农场是否完全连通。

第 *i+1* 行表示在按顺序关闭了 *i* 个牛棚后，农场是否完全连通。

### 数据范围

*1 ≤ N,M ≤ 3000*

### 输入样例：

```
4 3
1 2
2 3
3 4
3
4
1
2
```

### 输出样例：

```
YES
NO
YES
YES
```
