## [2708. 高速公路](https://www.acwing.com/problem/content/2710/)

### 题目

Y901 高速公路是一条重要的交通纽带，政府部门建设初期的投入以及使用期间的养护费用都不低，因此政府在这条高速公路上设立了许多收费站。

Y901 高速公路是一条由 *N-1* 段路以及 *N* 个收费站组成的东西向的链，我们按照由西向东的顺序将收费站依次编号为 *1 ~ N*，从收费站 *i* 行驶到 *i+1*(或从 *i+1* 行驶到 *i*)需要收取 *V_i*的费用。

高速路刚建成时所有的路段都是免费的。

政府部门根据实际情况，会不定期地对连续路段的收费标准进行调整，根据政策涨价或降价。

无聊的小 *A* 同学总喜欢研究一些稀奇古怪的问题，他开车在这条高速路上行驶时想到了这样一个问题:

对于给定的 *l,r(l<r)*，在第 *l* 个到第 *r* 个收费站里等概率随机取出两个不同的收费站 *a* 和 *b*，那么从 *a* 行驶到 *b* 将期望花费多少费用呢?

### 输入格式

第一行 *2* 个正整数 *N,M*，表示有 *N* 个收费站，*M* 次调整或询问。

接下来 *M* 行，每行将出现以下两种形式中的一种：

- `C l r v` 表示将第 *l* 个收费站到第 *r* 个收费站之间的所有道路的通行费全部增加 *v*。
- `Q l r` 表示对于给定的 *l,r*，要求回答小 *A* 的问题。

所有 *C* 与 *Q* 操作中保证 *1 ≤ l<r ≤ N*。

### 输出格式

对于每次询问操作回答一行，输出一个既约分数。

若答案为整数 *a*，输出 *a/1*。

### 数据范围

所有 *C* 操作中的 *v* 的绝对值不超过 *10000*,

在任何时刻任意道路的费用均为不超过 *10000* 的非负整数,

所有测试点的详细情况如下表所示

 ![QQ截图20201028141606.png](https://cdn.acwing.com/media/article/image/2020/10/28/19_14eaacf018-QQ截图20201028141606.png)

### 输入样例：

```
4 5
C 1 4 2
C 1 2 -1
Q 1 2
Q 2 4
Q 1 4
```

### 输出样例：

```
1/1
8/3
17/6
```
