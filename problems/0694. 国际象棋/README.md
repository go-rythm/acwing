## [694. 国际象棋](https://www.acwing.com/problem/content/696/)

### 题目

给定一个带有棋子的棋盘，计算出操纵某个棋子一步杀死任意一个其他棋子的不同方案有多少种。

注意：在这个问题中，不分阵营，所有棋子能杀到其他任何棋子就杀。

 ![666.png](https://cdn.acwing.com/media/article/image/2019/04/17/19_77d25e0860-666.png)

例如，如果有 *3* 个棋子，其中国王在 *B2*，士兵在 *A1*，女王在 *H8*，那么就存在 *3* 种杀法，*H8* 女王可以杀死 *B2* 国王，*A1* 士兵可以杀死 *B2* 国王 ，*B2* 国王可以杀死 *A1* 士兵。

棋盘上的位置表示为 *A1，A2 … A8，B1 … H8*。（其中字母表示所在列，数字表示所在行，如上图所示，左上角的车位于 *H1*）

棋子种类及行动规则：

（*K*）国王：横、直、斜都可以走，但每次限走一格。

（*Q*）女王：横、直、斜都可以走，格数不受限制，但不能越子。

（*R*）车：横、竖均可以走，格数不受限制，不能斜走，不能越子。

（*B*）象：只能斜走，格数不限，不能越子。

（*N*）马：每步棋先横走一格再直走两格；或者先直走一格，再横走两格，可以越子。

（*P*）士兵：只能通过向 **前方** 对角线移动一格来杀死其它棋子（前方主要针对字母，指移动过程只能从 `A -> B`， `B -> C` 等）。

### 输入格式

第一行包含整数 *T*，表示共有 *T* 组测试数据。

每组数据第一行包含整数 *N*，表示棋盘中棋子的数量。

接下来 *N* 行，每行描述一个棋子的位置和种类，如 `A1-K` 表示处在 *A1* 位置上的国王。

### 输出格式

每组数据输出一个结果，每个结果占一行。

结果表示为 `Case #x: y`，其中 *x* 是组别编号（从 *1* 开始），*y* 是一步杀死任何棋子的可行方案数量。

### 数据范围

*1 ≤ T ≤ 100*,

*1 ≤ N ≤ 64*

### 输入样例：

```
2
2
A1-K
A8-Q
3
B2-K
A1-P
H8-Q
```

### 输出样例：

```
Case #1: 1
Case #2: 3
```
