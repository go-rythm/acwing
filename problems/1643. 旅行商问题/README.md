## [1643. 旅行商问题](https://www.acwing.com/problem/content/1645/)

### 题目

“旅行商问题”是这样一个问题：“给出一个城市列表以及每对城市之间的距离，访问每个城市并返回原城市的最短路线是什么？”

这是组合优化中的一个 NP 难题，在运筹学和理论计算机科学中十分重要。

在此问题中，请你从给定的路径列表中找到最接近旅行商问题的解的路径。

### 输入格式

第一行包含两个整数 *N* 和 *M*，分别表示城市数量以及 **无向图** 中边的数量。

接下来 *M* 行，每行以 `City1 City2 Dist` 格式描述一条边，其中城市编号从 *1* 到 *N*， `Dist` 为正且不超过 *100*。

再一行包含一个整数 *K*，表示给定路径的数量。

接下来 *K* 行描述路径，格式为：

*n* *C_1* *C_2* … *C_n*

*n* 表示给定路径经过的城市的数目，*C_i* 是路径中经过的城市的编号。

### 输出格式

对于每个路径，在一行中输出 `Path X: TotalDist (Description)`。

其中 `X` 是路径编号（从 *1* 开始）， `TotalDist` 表示路径总距离（如果距离不存在，则输出 `NA`）， `Description` 是下列中的一项：

- `TS simple cycle`，如果这是一个访问每个城市的简单回路。
- `TS cycle`，如果这是一个访问每个城市的回路，但不是简单回路。
- `Not a TS cycle`，如果这不是一个访问了每个城市的回路。

最后一行，输出 `Shortest Dist(X) = TotalDist`， `X` 是最接近旅行商问题解决方案的回路编号， `TotalDist` 是其总距离。

保证有唯一解。

### 数据范围

*2 < N ≤ 200*,

*N-1 ≤ M ≤ frac{N(N-1)}{2}*，

*1 ≤ K ≤ 1000*,

*1 ≤ n ≤ 300*

### 输入样例：

```
6 10
6 2 1
3 4 1
1 5 1
2 5 1
3 1 8
4 1 6
1 6 1
6 3 1
1 2 1
4 5 1
7
7 5 1 4 3 6 2 5
7 6 1 3 4 5 2 6
6 5 1 4 3 6 2
9 6 2 1 6 3 4 5 2 6
4 1 2 5 1
7 6 1 2 5 4 3 1
7 6 3 2 5 4 1 6
```

### 输出样例：

```
Path 1: 11 (TS simple cycle)
Path 2: 13 (TS simple cycle)
Path 3: 10 (Not a TS cycle)
Path 4: 8 (TS cycle)
Path 5: 3 (Not a TS cycle)
Path 6: 13 (Not a TS cycle)
Path 7: NA (Not a TS cycle)
Shortest Dist(4) = 8
```
